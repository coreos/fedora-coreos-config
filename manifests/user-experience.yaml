# These packages are either widely used utilities/services or 
# are targeted for improving the general CoreOS user experience.
# It is intended to be kept generic so that it may be shared downstream with
# RHCOS.

# ⚠⚠⚠ ONLY TEMPORARY HACKS ALLOWED HERE; ALL ENTRIES NEED TRACKER LINKS ⚠⚠⚠
# See also the version of this in fedora-coreos.yaml
postprocess:
  # Edit `login.defs` to configure `login(1)` to read from `/run/motd.d` for
  # displaying the MOTD. This is required for newer versions of
  # `console-login-helper-messages` to function properly.
  # This will be dropped once Fedora util-linux adds `/run/motd.d` as a default
  # in Fedora 34.
  # https://src.fedoraproject.org/rpms/util-linux/pull-request/8
  # https://github.com/coreos/fedora-coreos-tracker/issues/704#issuecomment-772862174
  - |
    #!/usr/bin/env bash
    source /etc/os-release
    if [ ${VERSION_ID} -lt 34 ]; then
      echo 'MOTD_FILE=/usr/share/misc/motd:/run/motd:/run/motd.d:/etc/motd:/etc/motd.d' >> /etc/login.defs
    fi

packages:
  # Basic user tools
  ## jq - parsing/interacting with JSON data
  - bash-completion
  - coreutils
  - jq
  - less
  - sudo
  - vim-minimal
  # File compression/decompression
  ## bsdtar - dependency of 35coreos-live dracut module
  - bsdtar
  - bzip2
  - gzip
  - tar
  - xz
  # Improved login messages experience
  - console-login-helper-messages-motdgen
  - console-login-helper-messages-issuegen
  - console-login-helper-messages-profile
  # kdump support
  # https://github.com/coreos/fedora-coreos-tracker/issues/622
  - kexec-tools
  # Remote Access
  - openssh-clients openssh-server
  # Container tooling
  - podman
  - runc
  - skopeo
  - toolbox
